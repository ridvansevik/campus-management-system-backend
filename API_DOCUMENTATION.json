{
  "api": {
    "name": "Smart Campus Management System API",
    "version": "1.0.0",
    "baseUrl": "http://localhost:5000/api/v1",
    "description": "Akıllı Kampüs Yönetim Sistemi Backend API Dokümantasyonu",
    "authentication": {
      "type": "Bearer Token (JWT)",
      "description": "Çoğu endpoint için JWT token gereklidir. Token'ı Authorization header'ında 'Bearer {token}' formatında gönderin.",
      "tokenExpiration": {
        "accessToken": "15 dakika",
        "refreshToken": "7 gün"
      }
    },
    "commonHeaders": {
      "Content-Type": "application/json",
      "Authorization": "Bearer {accessToken}"
    },
    "commonResponses": {
      "success": {
        "status": 200,
        "structure": {
          "success": true,
          "message": "İşlem başarılı",
          "data": {}
        }
      },
      "error": {
        "status": 400,
        "structure": {
          "success": false,
          "message": "Hata mesajı",
          "error": "Detaylı hata bilgisi"
        }
      },
      "unauthorized": {
        "status": 401,
        "message": "Yetkilendirme hatası - Token geçersiz veya eksik"
      },
      "forbidden": {
        "status": 403,
        "message": "Bu işlem için yetkiniz yok"
      },
      "notFound": {
        "status": 404,
        "message": "Kayıt bulunamadı"
      }
    }
  },
  "endpoints": {
    "authentication": {
      "group": "Kimlik Doğrulama",
      "basePath": "/auth",
      "endpoints": [
        {
          "method": "POST",
          "path": "/api/v1/auth/register",
          "name": "Kullanıcı Kaydı",
          "description": "Yeni kullanıcı kaydı oluşturur. Öğrenci veya öğretim üyesi olarak kayıt yapılabilir.",
          "authenticationRequired": false,
          "requestBody": {
            "required": true,
            "contentType": "application/json",
            "schema": {
              "email": {
                "type": "string",
                "format": "email",
                "required": true,
                "description": "Kullanıcı e-posta adresi"
              },
              "password": {
                "type": "string",
                "required": true,
                "minLength": 8,
                "pattern": "En az 1 büyük harf, 1 küçük harf ve 1 rakam içermeli",
                "description": "Kullanıcı şifresi"
              },
              "role": {
                "type": "string",
                "required": true,
                "enum": ["student", "faculty"],
                "description": "Kullanıcı rolü"
              },
              "first_name": {
                "type": "string",
                "required": true,
                "minLength": 2,
                "description": "Ad"
              },
              "last_name": {
                "type": "string",
                "required": true,
                "minLength": 2,
                "description": "Soyad"
              },
              "tc_identity_number": {
                "type": "string",
                "required": true,
                "length": 11,
                "pattern": "11 haneli rakam",
                "description": "TC Kimlik Numarası"
              },
              "date_of_birth": {
                "type": "date",
                "required": false,
                "description": "Doğum tarihi (YYYY-MM-DD)"
              },
              "gender": {
                "type": "string",
                "required": false,
                "enum": ["male", "female", "other"],
                "description": "Cinsiyet"
              },
              "phone_number": {
                "type": "string",
                "required": false,
                "description": "Telefon numarası"
              },
              "address": {
                "type": "string",
                "required": false,
                "description": "Adres"
              },
              "city": {
                "type": "string",
                "required": false,
                "description": "Şehir"
              },
              "country": {
                "type": "string",
                "required": false,
                "default": "Türkiye",
                "description": "Ülke"
              },
              "department_id": {
                "type": "number",
                "required": true,
                "description": "Bölüm ID'si (ZORUNLU - GET /departments ile alınır)"
              },
              "student_number": {
                "type": "string",
                "required": false,
                "description": "Öğrenci numarası (opsiyonel, sistem otomatik oluşturur)"
              },
              "employee_number": {
                "type": "string",
                "required": false,
                "description": "Personel numarası (role='faculty' için, opsiyonel)"
              },
              "title": {
                "type": "string",
                "required": "role='faculty' ise zorunlu",
                "enum": ["Prof. Dr.", "Doç. Dr.", "Dr. Öğr. Üyesi", "Arş. Gör.", "Öğr. Gör.", "Okutman"],
                "description": "Ünvan (role='faculty' için ZORUNLU)"
              },
              "office_location": {
                "type": "string",
                "required": false,
                "description": "Ofis konumu (role='faculty' için)"
              },
              "specialization": {
                "type": "string",
                "required": false,
                "description": "Uzmanlık alanı (role='faculty' için)"
              }
            },
            "example": {
              "email": "ogrenci@example.com",
              "password": "Sifre123",
              "role": "student",
              "first_name": "Ahmet",
              "last_name": "Yılmaz",
              "tc_identity_number": "12345678901",
              "date_of_birth": "2002-05-15",
              "gender": "male",
              "phone_number": "05551234567",
              "address": "Örnek Mahallesi, Örnek Sokak No:1",
              "city": "Ankara",
              "department_id": 1
            }
          },
          "responses": {
            "201": {
              "description": "Kayıt başarılı",
              "body": {
                "success": true,
                "message": "Kayıt başarılı. Lütfen e-postanızı kontrol edin."
              }
            },
            "400": {
              "description": "Geçersiz istek veya e-posta zaten kayıtlı",
              "body": {
                "success": false,
                "message": "Bu e-posta veya numara zaten kayıtlı."
              }
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/v1/auth/login",
          "name": "Kullanıcı Girişi",
          "description": "Kullanıcı girişi yapar ve access token ile refresh token döner.",
          "authenticationRequired": false,
          "requestBody": {
            "required": true,
            "contentType": "application/json",
            "schema": {
              "email": {
                "type": "string",
                "format": "email",
                "required": true,
                "description": "Kullanıcı e-posta adresi"
              },
              "password": {
                "type": "string",
                "required": true,
                "description": "Kullanıcı şifresi"
              }
            },
            "example": {
              "email": "ogrenci@example.com",
              "password": "Sifre123"
            }
          },
          "responses": {
            "200": {
              "description": "Giriş başarılı",
              "body": {
                "success": true,
                "data": {
                  "user": {
                    "id": "uuid",
                    "email": "ogrenci@example.com",
                    "role": "student"
                  },
                  "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                }
              }
            },
            "401": {
              "description": "Geçersiz kimlik bilgileri veya e-posta doğrulanmamış",
              "body": {
                "success": false,
                "message": "Geçersiz kimlik bilgileri. (veya) Lütfen önce e-posta adresinizi doğrulayın."
              },
              "possibleMessages": [
                "Geçersiz kimlik bilgileri.",
                "Lütfen önce e-posta adresinizi doğrulayın."
              ]
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/v1/auth/verify-email",
          "name": "E-posta Doğrulama",
          "description": "Kayıt sırasında gönderilen e-posta doğrulama token'ı ile hesabı aktifleştirir.",
          "authenticationRequired": false,
          "requestBody": {
            "required": true,
            "contentType": "application/json",
            "schema": {
              "token": {
                "type": "string",
                "required": true,
                "description": "E-posta doğrulama token'ı"
              }
            },
            "example": {
              "token": "abc123def456..."
            }
          },
          "responses": {
            "200": {
              "description": "E-posta başarıyla doğrulandı",
              "body": {
                "success": true,
                "message": "E-posta başarıyla doğrulandı. Giriş yapabilirsiniz.",
                "data": {
                  "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                }
              }
            },
            "400": {
              "description": "Geçersiz veya kullanılmış token",
              "body": {
                "success": false,
                "message": "Geçersiz veya zaten kullanılmış doğrulama tokenı."
              }
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/v1/auth/refresh",
          "name": "Token Yenileme",
          "description": "Refresh token kullanarak yeni access token alır.",
          "authenticationRequired": false,
          "requestBody": {
            "required": true,
            "contentType": "application/json",
            "schema": {
              "refreshToken": {
                "type": "string",
                "required": true,
                "description": "Refresh token"
              }
            },
            "example": {
              "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
            }
          },
          "responses": {
            "200": {
              "description": "Token başarıyla yenilendi",
              "body": {
                "success": true,
                "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
              }
            },
            "401": {
              "description": "Geçersiz veya süresi dolmuş refresh token",
              "body": {
                "success": false,
                "message": "Geçersiz veya süresi dolmuş refresh token."
              }
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/v1/auth/logout",
          "name": "Çıkış Yapma",
          "description": "Kullanıcı çıkışı yapar. (Not: Token'lar client-side'da silinmelidir)",
          "authenticationRequired": false,
          "requestBody": {
            "required": false
          },
          "responses": {
            "200": {
              "description": "Çıkış başarılı",
              "body": {
                "success": true,
                "message": "Başarıyla çıkış yapıldı."
              }
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/v1/auth/forgot-password",
          "name": "Şifre Sıfırlama İsteği",
          "description": "Şifre sıfırlama e-postası gönderir.",
          "authenticationRequired": false,
          "requestBody": {
            "required": true,
            "contentType": "application/json",
            "schema": {
              "email": {
                "type": "string",
                "format": "email",
                "required": true,
                "description": "Kullanıcı e-posta adresi"
              }
            },
            "example": {
              "email": "ogrenci@example.com"
            }
          },
          "responses": {
            "200": {
              "description": "E-posta gönderildi",
              "body": {
                "success": true,
                "message": "E-posta gönderildi."
              }
            },
            "404": {
              "description": "E-posta ile kayıtlı kullanıcı bulunamadı",
              "body": {
                "success": false,
                "message": "Bu email ile kayıtlı kullanıcı yok."
              }
            }
          }
        },
        {
          "method": "PUT",
          "path": "/api/v1/auth/reset-password/:resettoken",
          "name": "Şifre Sıfırlama",
          "description": "Şifre sıfırlama token'ı ile yeni şifre belirler.",
          "authenticationRequired": false,
          "pathParameters": {
            "resettoken": {
              "type": "string",
              "required": true,
              "description": "Şifre sıfırlama token'ı (URL parametresi)"
            }
          },
          "requestBody": {
            "required": true,
            "contentType": "application/json",
            "schema": {
              "password": {
                "type": "string",
                "required": true,
                "minLength": 8,
                "pattern": "En az 1 büyük harf, 1 küçük harf ve 1 rakam içermeli",
                "description": "Yeni şifre"
              }
            },
            "example": {
              "password": "YeniSifre123"
            }
          },
          "responses": {
            "200": {
              "description": "Şifre başarıyla güncellendi",
              "body": {
                "success": true,
                "message": "Şifre başarıyla güncellendi. Giriş yapabilirsiniz."
              }
            },
            "400": {
              "description": "Geçersiz veya süresi dolmuş token",
              "body": {
                "success": false,
                "message": "Geçersiz veya süresi dolmuş token."
              }
            }
          }
        }
      ]
    },
    "users": {
      "group": "Kullanıcı İşlemleri",
      "basePath": "/users",
      "description": "Tüm endpoint'ler authentication gerektirir (Bearer Token)",
      "endpoints": [
        {
          "method": "GET",
          "path": "/api/v1/users/me",
          "name": "Profil Bilgilerini Getir",
          "description": "Giriş yapmış kullanıcının kendi profil bilgilerini getirir.",
          "authenticationRequired": true,
          "requestBody": {
            "required": false
          },
          "responses": {
            "200": {
              "description": "Profil bilgileri başarıyla getirildi",
              "body": {
                "success": true,
                "data": {
                  "id": "uuid",
                  "email": "ogrenci@example.com",
                  "first_name": "Ahmet",
                  "last_name": "Yılmaz",
                  "tc_identity_number": "12345678901",
                  "date_of_birth": "2002-05-15",
                  "gender": "male",
                  "phone_number": "5551234567",
                  "address": "Örnek Mahallesi, Örnek Sokak No:1",
                  "city": "Ankara",
                  "country": "Türkiye",
                  "bio": "Kullanıcı hakkında bilgi",
                  "role": "student",
                  "is_verified": true,
                  "profile_picture_url": "https://res.cloudinary.com/your-cloud/image/upload/v1234567890/kampus-profil-fotolari/profile_userid_timestamp.jpg",
                  "created_at": "2024-01-01T00:00:00.000Z",
                  "updated_at": "2024-01-01T00:00:00.000Z",
                  "studentProfile": {
                    "student_number": "2024001",
                    "gpa": 3.5,
                    "cgpa": 3.4,
                    "current_semester": 3,
                    "enrollment_date": "2022-09-15",
                    "status": "active",
                    "department": {
                      "id": 1,
                      "name": "Bilgisayar Mühendisliği",
                      "code": "CENG",
                      "faculty_name": "Mühendislik Fakültesi"
                    }
                  },
                  "facultyProfile": null
                }
              },
              "notes": [
                "profile_picture_url Cloudinary CDN URL'idir ve null olabilir",
                "Kullanıcı rolüne göre studentProfile veya facultyProfile dolu olur",
                "Hassas bilgiler (password_hash, verification_token, reset_password_token) döndürülmez",
                "tc_identity_number hassas veri olduğu için sadece kendi profilinde görünür",
                "department bilgisi relation olarak otomatik yüklenir"
              ]
            },
            "404": {
              "description": "Kullanıcı bulunamadı",
              "body": {
                "success": false,
                "message": "Kullanıcı bulunamadı."
              }
            }
          }
        },
        {
          "method": "PUT",
          "path": "/api/v1/users/me",
          "name": "Profil Güncelle",
          "description": "Giriş yapmış kullanıcının kendi profil bilgilerini günceller.",
          "authenticationRequired": true,
          "requestBody": {
            "required": true,
            "contentType": "application/json",
            "schema": {
              "first_name": {
                "type": "string",
                "required": false,
                "description": "Ad"
              },
              "last_name": {
                "type": "string",
                "required": false,
                "description": "Soyad"
              },
              "tc_identity_number": {
                "type": "string",
                "required": false,
                "description": "TC Kimlik Numarası"
              },
              "date_of_birth": {
                "type": "date",
                "required": false,
                "description": "Doğum tarihi"
              },
              "gender": {
                "type": "string",
                "required": false,
                "enum": ["male", "female", "other"],
                "description": "Cinsiyet"
              },
              "phone_number": {
                "type": "string",
                "required": false,
                "description": "Telefon numarası"
              },
              "address": {
                "type": "string",
                "required": false,
                "description": "Adres"
              },
              "city": {
                "type": "string",
                "required": false,
                "description": "Şehir"
              },
              "country": {
                "type": "string",
                "required": false,
                "description": "Ülke"
              },
              "bio": {
                "type": "string",
                "required": false,
                "description": "Kullanıcı hakkında bilgi"
              },
              "department_id": {
                "type": "number",
                "required": false,
                "description": "Bölüm ID'si"
              },
              "student_number": {
                "type": "string",
                "required": false,
                "description": "Öğrenci numarası (sadece student rolü için)"
              },
              "current_semester": {
                "type": "number",
                "required": false,
                "description": "Güncel dönem (sadece student rolü için)"
              },
              "office_location": {
                "type": "string",
                "required": false,
                "description": "Ofis konumu (sadece faculty rolü için)"
              },
              "office_phone": {
                "type": "string",
                "required": false,
                "description": "Ofis telefonu (sadece faculty rolü için)"
              },
              "specialization": {
                "type": "string",
                "required": false,
                "description": "Uzmanlık alanı (sadece faculty rolü için)"
              },
              "title": {
                "type": "string",
                "required": false,
                "enum": ["Prof. Dr.", "Doç. Dr.", "Dr. Öğr. Üyesi", "Arş. Gör.", "Öğr. Gör.", "Okutman"],
                "description": "Ünvan (sadece faculty rolü için)"
              }
            },
            "example": {
              "first_name": "Ahmet",
              "last_name": "Yılmaz",
              "phone_number": "5551234567",
              "address": "Yeni Mahalle, Yeni Sokak No:5",
              "city": "İstanbul",
              "bio": "Yeni bio bilgisi",
              "department_id": 2
            }
          },
          "responses": {
            "200": {
              "description": "Profil başarıyla güncellendi",
              "body": {
                "success": true,
                "message": "Profil başarıyla güncellendi.",
                "data": {
                  "id": "uuid",
                  "email": "ogrenci@example.com",
                  "phone_number": "5551234567",
                  "address": "İstanbul, Türkiye",
                  "bio": "Yeni bio bilgisi",
                  "role": "student",
                  "studentProfile": {
                    "student_number": "2024001",
                    "department": {
                      "id": 1,
                      "name": "Bilgisayar Mühendisliği",
                      "code": "CSE"
                    }
                  }
                }
              }
            },
            "404": {
              "description": "Kullanıcı bulunamadı",
              "body": {
                "success": false,
                "message": "Kullanıcı bulunamadı."
              }
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/v1/users/me/profile-picture",
          "name": "Profil Fotoğrafı Yükle",
          "description": "Giriş yapmış kullanıcının profil fotoğrafını Cloudinary'ye yükler ve URL'ini döner.",
          "authenticationRequired": true,
          "requestBody": {
            "required": true,
            "contentType": "multipart/form-data",
            "schema": {
              "profile_image": {
                "type": "file",
                "required": true,
                "description": "Profil fotoğrafı dosyası",
                "constraints": {
                  "maxSize": "5MB",
                  "allowedFormats": ["jpg", "jpeg", "png"],
                  "imageTransformation": "Otomatik olarak maksimum 800x800 piksel boyutuna ölçeklendirilir"
                }
              }
            },
            "notes": [
              "Dosya FormData ile 'profile_image' alanı olarak gönderilmelidir",
              "Content-Type: multipart/form-data kullanılmalıdır",
              "Authorization header'ı ile Bearer token gönderilmelidir"
            ]
          },
          "responses": {
            "200": {
              "description": "Profil fotoğrafı başarıyla Cloudinary'ye yüklendi",
              "body": {
                "success": true,
                "message": "Profil fotoğrafı güncellendi.",
                "data": {
                  "profilePictureUrl": "https://res.cloudinary.com/your-cloud/image/upload/v1234567890/kampus-profil-fotolari/profile_userid_timestamp.jpg",
                  "cloudinaryPublicId": "kampus-profil-fotolari/profile_userid_timestamp"
                }
              },
              "notes": [
                "profilePictureUrl Cloudinary CDN URL'idir ve doğrudan kullanılabilir",
                "cloudinaryPublicId gelecekte resim silme işlemleri için kullanılabilir"
              ]
            },
            "400": {
              "description": "Dosya yüklenmedi veya geçersiz format",
              "body": {
                "success": false,
                "message": "Lütfen bir resim dosyası yükleyin."
              },
              "possibleErrors": [
                "Dosya gönderilmedi",
                "Geçersiz dosya formatı (sadece JPG, JPEG, PNG kabul edilir)",
                "Dosya boyutu 5MB'dan büyük"
              ]
            },
            "401": {
              "description": "Kimlik doğrulama hatası",
              "body": {
                "success": false,
                "message": "Bu işlem için giriş yapmalısınız."
              }
            }
          }
        },
        {
          "method": "PUT",
          "path": "/api/v1/users/change-password",
          "name": "Şifre Değiştir",
          "description": "Giriş yapmış kullanıcının şifresini değiştirir.",
          "authenticationRequired": true,
          "requestBody": {
            "required": true,
            "contentType": "application/json",
            "schema": {
              "currentPassword": {
                "type": "string",
                "required": true,
                "description": "Mevcut şifre"
              },
              "newPassword": {
                "type": "string",
                "required": true,
                "minLength": 8,
                "pattern": "En az 1 büyük harf, 1 küçük harf ve 1 rakam içermeli",
                "description": "Yeni şifre"
              }
            },
            "example": {
              "currentPassword": "EskiSifre123",
              "newPassword": "YeniSifre123"
            }
          },
          "responses": {
            "200": {
              "description": "Şifre başarıyla değiştirildi",
              "body": {
                "success": true,
                "message": "Şifreniz başarıyla değiştirildi."
              }
            },
            "400": {
              "description": "Mevcut şifre hatalı",
              "body": {
                "success": false,
                "message": "Mevcut şifreniz hatalı."
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/v1/users",
          "name": "Tüm Kullanıcıları Listele (Admin)",
          "description": "Tüm kullanıcıları listeler. Sadece admin rolüne sahip kullanıcılar erişebilir.",
          "authenticationRequired": true,
          "authorization": {
            "requiredRole": "admin"
          },
          "queryParameters": {
            "page": {
              "type": "number",
              "required": false,
              "default": 1,
              "description": "Sayfa numarası"
            },
            "limit": {
              "type": "number",
              "required": false,
              "default": 10,
              "description": "Sayfa başına kayıt sayısı"
            },
            "search": {
              "type": "string",
              "required": false,
              "description": "E-posta adresine göre arama"
            },
            "role": {
              "type": "string",
              "required": false,
              "enum": ["student", "faculty", "admin", "staff"],
              "description": "Rol filtresi"
            }
          },
          "requestBody": {
            "required": false
          },
          "responses": {
            "200": {
              "description": "Kullanıcı listesi başarıyla getirildi",
              "body": {
                "success": true,
                "data": [
                  {
                    "id": "uuid",
                    "email": "ogrenci@example.com",
                    "role": "student",
                    "is_verified": true,
                    "studentProfile": {
                      "student_number": "2024001",
                      "department": {
                        "id": 1,
                        "name": "Bilgisayar Mühendisliği",
                        "code": "CSE"
                      }
                    }
                  }
                ],
                "pagination": {
                  "total": 100,
                  "page": 1,
                  "totalPages": 10
                }
              }
            },
            "403": {
              "description": "Yetkisiz erişim",
              "body": {
                "success": false,
                "message": "Bu işlem için yetkiniz yok."
              }
            }
          }
        }
      ]
    },
    "departments": {
      "group": "Bölüm İşlemleri",
      "basePath": "/departments",
      "description": "Kampüs bölümleri yönetimi. Listeleme public, yönetim işlemleri admin.",
      "endpoints": [
        {
          "method": "GET",
          "path": "/api/v1/departments",
          "name": "Tüm Bölümleri Listele",
          "description": "Tüm bölümleri listeler. Kayıt formunda kullanılır.",
          "authenticationRequired": false,
          "requestBody": {
            "required": false
          },
          "responses": {
            "200": {
              "description": "Bölümler başarıyla getirildi",
              "body": {
                "success": true,
                "count": 12,
                "data": [
                  {
                    "id": 1,
                    "name": "Bilgisayar Mühendisliği",
                    "code": "CENG",
                    "faculty_name": "Mühendislik Fakültesi"
                  },
                  {
                    "id": 2,
                    "name": "Elektrik-Elektronik Mühendisliği",
                    "code": "EEE",
                    "faculty_name": "Mühendislik Fakültesi"
                  }
                ]
              },
              "notes": [
                "Bu endpoint authentication gerektirmez",
                "Kayıt formunda dropdown için kullanılır",
                "Fakülte adına göre gruplandırılmış şekilde gelmektedir"
              ]
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/v1/departments/:id",
          "name": "Bölüm Detayı",
          "description": "Belirli bir bölümün detaylarını getirir.",
          "authenticationRequired": false,
          "pathParameters": {
            "id": {
              "type": "number",
              "required": true,
              "description": "Bölüm ID'si"
            }
          },
          "responses": {
            "200": {
              "description": "Bölüm detayları",
              "body": {
                "success": true,
                "data": {
                  "id": 1,
                  "name": "Bilgisayar Mühendisliği",
                  "code": "CENG",
                  "faculty_name": "Mühendislik Fakültesi",
                  "students": [],
                  "facultyMembers": []
                }
              }
            },
            "404": {
              "description": "Bölüm bulunamadı",
              "body": {
                "success": false,
                "message": "Bölüm bulunamadı."
              }
            }
          }
        },
        {
          "method": "POST",
          "path": "/api/v1/departments",
          "name": "Yeni Bölüm Oluştur (Admin)",
          "description": "Yeni bölüm oluşturur. Sadece admin erişebilir.",
          "authenticationRequired": true,
          "authorization": {
            "requiredRole": "admin"
          },
          "requestBody": {
            "required": true,
            "contentType": "application/json",
            "schema": {
              "name": {
                "type": "string",
                "required": true,
                "description": "Bölüm adı"
              },
              "code": {
                "type": "string",
                "required": true,
                "description": "Bölüm kodu (unique)"
              },
              "faculty_name": {
                "type": "string",
                "required": true,
                "description": "Fakülte adı"
              }
            },
            "example": {
              "name": "Yazılım Mühendisliği",
              "code": "SE",
              "faculty_name": "Mühendislik Fakültesi"
            }
          },
          "responses": {
            "201": {
              "description": "Bölüm başarıyla oluşturuldu",
              "body": {
                "success": true,
                "message": "Bölüm başarıyla oluşturuldu.",
                "data": {
                  "id": 13,
                  "name": "Yazılım Mühendisliği",
                  "code": "SE",
                  "faculty_name": "Mühendislik Fakültesi"
                }
              }
            },
            "400": {
              "description": "Bu kod ile kayıtlı bir bölüm zaten var",
              "body": {
                "success": false,
                "message": "Bu kod ile kayıtlı bir bölüm zaten var."
              }
            },
            "403": {
              "description": "Yetkisiz erişim",
              "body": {
                "success": false,
                "message": "Bu işlem için yetkiniz yok."
              }
            }
          }
        },
        {
          "method": "PUT",
          "path": "/api/v1/departments/:id",
          "name": "Bölüm Güncelle (Admin)",
          "description": "Bölüm bilgilerini günceller. Sadece admin erişebilir.",
          "authenticationRequired": true,
          "authorization": {
            "requiredRole": "admin"
          },
          "pathParameters": {
            "id": {
              "type": "number",
              "required": true,
              "description": "Bölüm ID'si"
            }
          },
          "requestBody": {
            "required": true,
            "contentType": "application/json",
            "schema": {
              "name": {
                "type": "string",
                "required": false,
                "description": "Bölüm adı"
              },
              "code": {
                "type": "string",
                "required": false,
                "description": "Bölüm kodu"
              },
              "faculty_name": {
                "type": "string",
                "required": false,
                "description": "Fakülte adı"
              }
            }
          },
          "responses": {
            "200": {
              "description": "Bölüm başarıyla güncellendi",
              "body": {
                "success": true,
                "message": "Bölüm başarıyla güncellendi."
              }
            }
          }
        },
        {
          "method": "DELETE",
          "path": "/api/v1/departments/:id",
          "name": "Bölüm Sil (Admin)",
          "description": "Bölümü siler. İlişkili öğrenci/öğretmen varsa silinemez.",
          "authenticationRequired": true,
          "authorization": {
            "requiredRole": "admin"
          },
          "pathParameters": {
            "id": {
              "type": "number",
              "required": true,
              "description": "Bölüm ID'si"
            }
          },
          "responses": {
            "200": {
              "description": "Bölüm başarıyla silindi",
              "body": {
                "success": true,
                "message": "Bölüm başarıyla silindi."
              }
            },
            "400": {
              "description": "Bölüme kayıtlı öğrenci/öğretmen var",
              "body": {
                "success": false,
                "message": "Bu bölüme kayıtlı öğrenci veya öğretim üyesi bulunmaktadır."
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/api/v1/departments/:id/stats",
          "name": "Bölüm İstatistikleri (Admin)",
          "description": "Bölüm istatistiklerini getirir.",
          "authenticationRequired": true,
          "authorization": {
            "requiredRole": "admin"
          },
          "pathParameters": {
            "id": {
              "type": "number",
              "required": true,
              "description": "Bölüm ID'si"
            }
          },
          "responses": {
            "200": {
              "description": "Bölüm istatistikleri",
              "body": {
                "success": true,
                "data": {
                  "department": {
                    "id": 1,
                    "name": "Bilgisayar Mühendisliği",
                    "code": "CENG",
                    "faculty_name": "Mühendislik Fakültesi"
                  },
                  "statistics": {
                    "totalStudents": 150,
                    "totalFaculty": 25
                  }
                }
              }
            }
          }
        }
      ]
    }
  },
  "dataModels": {
    "User": {
      "id": "UUID (string)",
      "email": "string (unique, email format)",
      "first_name": "string",
      "last_name": "string",
      "tc_identity_number": "string (11 digits, unique)",
      "date_of_birth": "date",
      "gender": "enum: 'male' | 'female' | 'other'",
      "phone_number": "string",
      "address": "text",
      "city": "string",
      "country": "string (default: 'Türkiye')",
      "bio": "text",
      "role": "enum: 'student' | 'faculty' | 'admin' | 'staff'",
      "is_verified": "boolean",
      "profile_picture_url": "string (Cloudinary URL)",
      "created_at": "datetime",
      "updated_at": "datetime"
    },
    "Student": {
      "student_number": "string (unique)",
      "gpa": "float (0.0-4.0, default: 0.0)",
      "cgpa": "float (0.0-4.0, default: 0.0)",
      "current_semester": "integer (1-12, default: 1)",
      "enrollment_date": "date",
      "graduation_date": "date (optional)",
      "status": "enum: 'active' | 'graduated' | 'suspended' | 'withdrawn'",
      "departmentId": "number (foreign key, required)",
      "userId": "UUID (foreign key)"
    },
    "Faculty": {
      "employee_number": "string (unique)",
      "title": "enum: 'Prof. Dr.' | 'Doç. Dr.' | 'Dr. Öğr. Üyesi' | 'Arş. Gör.' | 'Öğr. Gör.' | 'Okutman'",
      "office_location": "string",
      "office_phone": "string",
      "specialization": "string",
      "hire_date": "date",
      "status": "enum: 'active' | 'on_leave' | 'retired'",
      "departmentId": "number (foreign key, required)",
      "userId": "UUID (foreign key)"
    },
    "Department": {
      "id": "number (auto-increment)",
      "name": "string (e.g., 'Bilgisayar Mühendisliği')",
      "code": "string (unique, e.g., 'CENG')",
      "faculty_name": "string (e.g., 'Mühendislik Fakültesi')",
      "created_at": "datetime",
      "updated_at": "datetime"
    }
  },
  "errorCodes": {
    "400": "Bad Request - Geçersiz istek",
    "401": "Unauthorized - Yetkilendirme hatası",
    "403": "Forbidden - Bu işlem için yetkiniz yok",
    "404": "Not Found - Kayıt bulunamadı",
    "500": "Internal Server Error - Sunucu hatası"
  },
  "notes": {
    "authentication": "Çoğu endpoint için Authorization header'ında Bearer token gönderilmelidir. Token formatı: 'Bearer {accessToken}'",
    "tokenRefresh": "Access token süresi dolduğunda (15 dakika) refresh token kullanarak yeni access token alınabilir. Refresh token 7 gün geçerlidir.",
    "emailVerification": {
      "description": "Kayıt sonrası kullanıcıya e-posta doğrulama linki gönderilir. Hesap doğrulanmadan giriş yapılamaz.",
      "flow": [
        "1. Kullanıcı kayıt olur (POST /auth/register)",
        "2. Sistem otomatik olarak doğrulama e-postası gönderir",
        "3. E-posta'daki link formatı: {FRONTEND_URL}/verify-email/{token}",
        "4. Frontend token'ı alıp POST /auth/verify-email endpoint'ine gönderir",
        "5. Doğrulama başarılıysa kullanıcı otomatik login olur (token'lar döner)"
      ],
      "emailService": "Gerçek SMTP e-posta servisi (NodeMailer) kullanılır. EMAIL_USER ve EMAIL_PASSWORD yapılandırılmamışsa mock mode'da çalışır ve console'a yazar."
    },
    "passwordReset": {
      "description": "Şifre sıfırlama token'ı 10 dakika geçerlidir.",
      "flow": [
        "1. Kullanıcı şifresini unuttuğunu belirtir (POST /auth/forgot-password)",
        "2. Sistem kullanıcının e-postasına şifre sıfırlama linki gönderir",
        "3. E-posta'daki link formatı: {FRONTEND_URL}/reset-password/{resettoken}",
        "4. Frontend token'ı alıp yeni şifre ile PUT /auth/reset-password/:resettoken endpoint'ine gönderir",
        "5. Şifre güncellenir ve kullanıcı giriş yapabilir"
      ],
      "tokenExpiry": "Reset token 10 dakika sonra otomatik olarak geçersiz hale gelir"
    },
    "fileUpload": {
      "description": "Profil fotoğrafı yükleme için multipart/form-data kullanılmalıdır.",
      "storage": "Cloudinary cloud storage kullanılır. Dosyalar CDN üzerinden servis edilir.",
      "constraints": {
        "maxSize": "5MB",
        "allowedFormats": ["jpg", "jpeg", "png"],
        "transformation": "Yüklenen resimler otomatik olarak 800x800 piksel maksimum boyutuna ölçeklendirilir"
      },
      "url": "Dönen URL Cloudinary CDN URL'idir ve doğrudan <img> tag'inde kullanılabilir"
    },
    "pagination": "Listeleme endpoint'lerinde sayfalama için 'page' ve 'limit' query parametreleri kullanılabilir. Varsayılan: page=1, limit=10",
    "rateLimiting": "API'ye 15 dakikada maksimum 100 istek gönderilebilir. Bu limit aşıldığında 429 (Too Many Requests) hatası dönülür.",
    "environmentVariables": {
      "required": [
        "JWT_SECRET: JWT token imzalama için kullanılır",
        "DB_* veya DATABASE_URL: PostgreSQL veritabanı bağlantı bilgileri",
        "FRONTEND_URL: Email'deki linklerde kullanılır",
        "CLOUDINARY_*: Profil fotoğrafı yüklemesi için gereklidir"
      ],
      "optional": [
        "EMAIL_USER, EMAIL_PASSWORD: Gerçek email göndermek için. Yoksa mock mode çalışır",
        "EMAIL_SERVICE: 'gmail' veya 'smtp'. Varsayılan: 'gmail'",
        "PORT: Sunucu portu. Varsayılan: 5000"
      ],
      "documentation": "Detaylı kurulum için ENVIRONMENT_SETUP.md dosyasına bakınız"
    },
    "security": {
      "passwordHashing": "Şifreler bcrypt ile 10 salt rounds kullanılarak hashlenır",
      "tokenSecurity": "JWT secret production'da güçlü ve rastgele olmalıdır",
      "emailTokens": "Email doğrulama ve şifre sıfırlama token'ları SHA256 ile hashlenip veritabanında saklanır",
      "cors": "CORS yapılandırması sadece belirtilen frontend URL'lerine izin verir",
      "helmet": "Helmet middleware ile HTTP header güvenliği sağlanır",
      "xss": "XSS-Clean middleware ile XSS saldırılarına karşı koruma sağlanır"
    }
  }
}

